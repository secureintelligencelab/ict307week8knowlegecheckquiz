<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 8 knowledge Check Quiz on Project Management</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }

        .quiz-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .quiz-header {
            background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .quiz-title {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .quiz-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .quiz-content {
            padding: 40px;
        }

        .welcome-screen {
            text-align: center;
        }

        .welcome-content h2 {
            color: #2d3748;
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .quiz-info {
            background: #f7fafc;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
            border-left: 4px solid #667eea;
        }

        .quiz-info h3 {
            color: #2d3748;
            margin-bottom: 15px;
        }

        .quiz-info ul {
            color: #4a5568;
            line-height: 1.6;
            padding-left: 20px;
        }

        .start-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.3s ease;
        }

        .start-btn:hover {
            transform: translateY(-2px);
        }

        .student-info {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
        }

        .input-group label {
            color: #2d3748;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .input-group input {
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            font-size: 1rem;
        }

        .question-container {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e2e8f0;
        }

        .question-number {
            background: #667eea;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
        }

        .progress-bar {
            flex: 1;
            margin: 0 20px;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transition: width 0.3s ease;
        }

        .timer {
            color: #e53e3e;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .question-content {
            margin-bottom: 30px;
        }

        .question-text {
            font-size: 1.2rem;
            color: #2d3748;
            margin-bottom: 20px;
            line-height: 1.6;
            font-weight: 500;
        }

        .question-type {
            background: #e2e8f0;
            color: #4a5568;
            padding: 4px 12px;
            border-radius: 16px;
            font-size: 0.8rem;
            display: inline-block;
            margin-bottom: 15px;
            text-transform: uppercase;
            font-weight: 600;
        }

        .mcq-options {
            display: grid;
            gap: 12px;
        }

        .mcq-option {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .mcq-option:hover {
            border-color: #667eea;
            background: #f7fafc;
        }

        .mcq-option.selected {
            border-color: #667eea;
            background: #edf2f7;
        }

        .mcq-option input[type="radio"] {
            margin-right: 12px;
            transform: scale(1.2);
        }

        .fill-blank-input {
            display: inline-block;
            border: none;
            border-bottom: 2px solid #667eea;
            padding: 5px 10px;
            margin: 0 5px;
            font-size: 1rem;
            background: transparent;
            min-width: 120px;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }

        .fill-blank-input:focus {
            outline: none;
            border-bottom-color: #4a5568;
        }

        .drag-drop-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            min-height: 300px;
        }

        .drag-column {
            border: 2px dashed #cbd5e0;
            border-radius: 8px;
            padding: 20px;
            background: #f7fafc;
        }

        .drag-column h4 {
            margin-bottom: 15px;
            color: #2d3748;
            text-align: center;
        }

        .draggable-item {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 6px;
            padding: 12px;
            margin-bottom: 10px;
            cursor: move;
            transition: all 0.3s ease;
            position: relative;
        }

        .draggable-item:hover {
            border-color: #667eea;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .draggable-item.dragging {
            opacity: 0.5;
            transform: rotate(5deg);
        }

        .drop-zone {
            min-height: 50px;
            border: 2px dashed #cbd5e0;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .drop-zone.drag-over {
            border-color: #667eea;
            background: #edf2f7;
        }

        .drop-zone.filled {
            border-color: #48bb78;
            background: #f0fff4;
        }

        .short-answer {
            width: 100%;
            min-height: 120px;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            resize: vertical;
            font-family: inherit;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }

        .short-answer:focus {
            outline: none;
            border-color: #667eea;
        }

        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #e2e8f0;
        }

        .nav-btn {
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .prev-btn {
            background: #e2e8f0;
            color: #4a5568;
        }

        .next-btn {
            background: #667eea;
            color: white;
        }

        .nav-btn:hover {
            transform: translateY(-1px);
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results-screen {
            display: none;
            text-align: center;
        }

        .results-header h2 {
            color: #2d3748;
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .score-display {
            background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            margin: 30px 0;
        }

        .score-number {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .score-breakdown {
            background: #f7fafc;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            text-align: left;
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .breakdown-item:last-child {
            border-bottom: none;
        }

        .pdf-btn {
            background: #e53e3e;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin: 20px 10px;
            transition: all 0.3s ease;
        }

        .pdf-btn:hover {
            background: #c53030;
            transform: translateY(-2px);
        }

        .restart-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            margin: 20px 10px;
            transition: all 0.3s ease;
        }

        .warning-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .warning-content {
            background: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            max-width: 400px;
        }

        .warning-content h3 {
            color: #e53e3e;
            margin-bottom: 15px;
        }

        @media (max-width: 768px) {
            .student-info {
                grid-template-columns: 1fr;
            }
            
            .drag-drop-container {
                grid-template-columns: 1fr;
            }
            
            .quiz-content {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <div class="quiz-header">
            <h1 class="quiz-title">Week 8 Knowledge Check Quiz on Project Management</h1>
            <p class="quiz-subtitle">Test Your Knowledge in Software Engineering & Project Management</p>
        </div>

        <div class="quiz-content">
            <!-- Welcome Screen -->
            <div class="welcome-screen" id="welcomeScreen">
                <div class="welcome-content">
                    <h2>Welcome to the Comprehensive Quiz</h2>
                    
                    <div class="quiz-info">
                        <h3>Quiz Topics Covered:</h3>
                        <ul>
                            <li>UML Sequence Diagrams</li>
                            <li>Use Case Diagrams</li>
                            <li>Class Diagrams</li>
                            <li>Activity Diagrams</li>
                            <li>JIRA Project Management</li>
                            <li>Scrum Framework</li>
                            <li>Stakeholder Analysis</li>
                            <li>Requirement Analysis</li>
                        </ul>
                    </div>

                    <div class="quiz-info">
                        <h3>Quiz Format:</h3>
                        <ul>
                            <li>30 Questions Total</li>
                            <li>Multiple Choice, Fill-in-the-blank, Drag & Drop, Short Answer</li>
                            <li>Time Limit: 50 minutes</li>
                            <li>Copy-paste protection enabled</li>
                            <li>PDF report generated at completion</li>
                        </ul>
                    </div>

                    <div class="student-info">
                        <div class="input-group">
                            <label for="studentName">Student Name:</label>
                            <input type="text" id="studentName" required>
                        </div>
                        <div class="input-group">
                            <label for="studentId">Student ID:</label>
                            <input type="text" id="studentId" required>
                        </div>
                    </div>

                    <button class="start-btn" onclick="startQuiz()">Start Quiz</button>
                </div>
            </div>

            <!-- Question Container -->
            <div class="question-container" id="questionContainer">
                <div class="question-header">
                    <div class="question-number" id="questionNumber">Question 1 of 30</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="timer" id="timer">50:00</div>
                </div>

                <div class="question-content" id="questionContent">
                    <!-- Dynamic question content will be inserted here -->
                </div>

                <div class="navigation-buttons">
                    <button class="nav-btn prev-btn" id="prevBtn" onclick="previousQuestion()" disabled>Previous</button>
                    <button class="nav-btn next-btn" id="nextBtn" onclick="nextQuestion()">Next</button>
                </div>
            </div>

            <!-- Results Screen -->
            <div class="results-screen" id="resultsScreen">
                <div class="results-header">
                    <h2>Quiz Completed!</h2>
                </div>

                <div class="score-display">
                    <div class="score-number" id="finalScore">0/30</div>
                    <div class="score-percentage" id="scorePercentage">0%</div>
                </div>

                <div class="score-breakdown" id="scoreBreakdown">
                    <!-- Score breakdown will be inserted here -->
                </div>

                <div class="results-actions">
                    <button class="pdf-btn" onclick="generatePDF()">Download PDF Report</button>
                    <button class="restart-btn" onclick="restartQuiz()">Retake Quiz</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Warning Overlay -->
    <div class="warning-overlay" id="warningOverlay">
        <div class="warning-content">
            <h3>⚠️ Security Warning</h3>
            <p>Copy-paste operations are disabled during this quiz to maintain academic integrity.</p>
            <button onclick="closeWarning()" style="margin-top: 15px; padding: 8px 20px; background: #667eea; color: white; border: none; border-radius: 4px; cursor: pointer;">OK</button>
        </div>
    </div>

    <script>
        // Enhanced Security: Disable copy-paste and right-click
        document.addEventListener('contextmenu', e => e.preventDefault());
        document.addEventListener('selectstart', function(e) {
            // Allow text selection only for input fields and textareas
            if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
                e.preventDefault();
            }
        });
        
        document.addEventListener('keydown', function(e) {
            // Allow typing in input fields but disable copy-paste shortcuts
            if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') {
                // Disable copy-paste in input fields but allow normal typing
                if (e.ctrlKey && (e.keyCode === 67 || e.keyCode === 86 || e.keyCode === 88)) {
                    e.preventDefault();
                    showWarning();
                    return;
                }
            } else {
                // Disable all selection outside input fields
                if (e.ctrlKey && (e.keyCode === 67 || e.keyCode === 86 || e.keyCode === 88 || e.keyCode === 65)) {
                    e.preventDefault();
                    showWarning();
                    return;
                }
            }
            
            // Disable F12, Ctrl+Shift+I, Ctrl+U
            if (e.keyCode === 123 || (e.ctrlKey && e.shiftKey && e.keyCode === 73) || (e.ctrlKey && e.keyCode === 85)) {
                e.preventDefault();
                showWarning();
            }
        });

        // Quiz data structure
        const quizData = [
            // Sequence Diagram Questions
            {
                type: 'mcq',
                category: 'Sequence Diagrams',
                question: 'In a UML sequence diagram, what does a dashed arrow represent?',
                options: [
                    'A synchronous message',
                    'An asynchronous message', 
                    'A return message',
                    'An object creation'
                ],
                correct: 2,
                points: 2
            },
            {
                type: 'fill',
                category: 'Sequence Diagrams',
                question: 'In sequence diagrams, the vertical dashed line representing the existence of an object over time is called a ______.',
                answer: ['lifeline'],
                points: 2
            },
            {
                type: 'mcq',
                category: 'Sequence Diagrams',
                question: 'Which element in a sequence diagram represents the order of interactions?',
                options: [
                    'Actors',
                    'Objects',
                    'Message sequence numbers',
                    'Activation boxes'
                ],
                correct: 2,
                points: 2
            },
            {
                type: 'short',
                category: 'Sequence Diagrams',
                question: 'Explain the purpose of activation boxes in sequence diagrams and when they should be used.',
                points: 4
            },

            // Use Case Diagram Questions
            {
                type: 'dragdrop',
                category: 'Use Case Diagrams',
                question: 'Drag and match the use case diagram elements with their descriptions:',
                leftItems: ['Actor', 'Use Case', 'Include Relationship', 'Extend Relationship'],
                rightItems: ['External entity interacting with system', 'Specific functionality or goal', 'Required behavior that must be included', 'Optional behavior that may occur'],
                correctMatches: {0: 0, 1: 1, 2: 2, 3: 3},
                points: 4
            },
            {
                type: 'mcq',
                category: 'Use Case Diagrams',
                question: 'In use case diagrams, which relationship indicates that one use case always includes another?',
                options: [
                    '<<extend>>',
                    '<<include>>',
                    '<<inherits>>',
                    '<<generalizes>>'
                ],
                correct: 1,
                points: 2
            },
            {
                type: 'short',
                category: 'Use Case Diagrams',
                question: 'Describe the difference between primary and secondary actors in use case diagrams.',
                points: 3
            },

            // Class Diagram Questions
            {
                type: 'mcq',
                category: 'Class Diagrams',
                question: 'What type of relationship does a diamond symbol represent in class diagrams?',
                options: [
                    'Inheritance',
                    'Association',
                    'Aggregation or Composition',
                    'Dependency'
                ],
                correct: 2,
                points: 2
            },
            {
                type: 'fill',
                category: 'Class Diagrams',
                question: 'In class diagrams, a ______ diamond represents aggregation, while a ______ diamond represents composition.',
                answer: ['hollow', 'filled'],
                points: 3
            },
            {
                type: 'dragdrop',
                category: 'Class Diagrams',
                question: 'Drag the visibility modifiers to match their symbols:',
                leftItems: ['Public', 'Private', 'Protected', 'Package'],
                rightItems: ['+', '-', '#', '~'],
                correctMatches: {0: 0, 1: 1, 2: 2, 3: 3},
                points: 4
            },
            {
                type: 'short',
                category: 'Class Diagrams',
                question: 'Explain the difference between aggregation and composition relationships in class diagrams with examples.',
                points: 5
            },

            // Activity Diagram Questions
            {
                type: 'mcq',
                category: 'Activity Diagrams',
                question: 'In activity diagrams, what does a filled circle represent?',
                options: [
                    'Decision point',
                    'Merge point',
                    'Start node',
                    'End node'
                ],
                correct: 2,
                points: 2
            },
            {
                type: 'short',
                category: 'Activity Diagrams',
                question: 'Explain the difference between a fork and a join in activity diagrams.',
                points: 4
            },
            {
                type: 'fill',
                category: 'Activity Diagrams',
                question: 'In activity diagrams, ______ are used to show parallel activities, while ______ are used to synchronize parallel flows.',
                answer: ['forks', 'joins'],
                points: 3
            },

            // JIRA Questions
            {
                type: 'mcq',
                category: 'JIRA',
                question: 'In JIRA, what is an Epic?',
                options: [
                    'A single user story',
                    'A large body of work that can be broken down into smaller stories',
                    'A bug report',
                    'A project milestone'
                ],
                correct: 1,
                points: 2
            },
            {
                type: 'dragdrop',
                category: 'JIRA',
                question: 'Match JIRA issue types with their purposes:',
                leftItems: ['Story', 'Bug', 'Epic', 'Task'],
                rightItems: ['User functionality requirement', 'Defect or error to fix', 'Large feature or initiative', 'Work item that needs completion'],
                correctMatches: {0: 0, 1: 1, 2: 2, 3: 3},
                points: 4
            },
            {
                type: 'fill',
                category: 'JIRA',
                question: 'In JIRA, the ______ view shows the progress of issues through different stages of the workflow.',
                answer: ['kanban'],
                points: 2
            },
            {
                type: 'short',
                category: 'JIRA',
                question: 'Describe the key components of a well-written user story in JIRA.',
                points: 4
            },

            // Scrum Framework Questions
            {
                type: 'mcq',
                category: 'Scrum',
                question: 'What is the recommended duration for a Sprint in Scrum?',
                options: [
                    '1 week',
                    '2-4 weeks',
                    '1-2 months',
                    '3-6 months'
                ],
                correct: 1,
                points: 2
            },
            {
                type: 'mcq',
                category: 'Scrum',
                question: 'Who is responsible for maximizing the value of the product in Scrum?',
                options: [
                    'Scrum Master',
                    'Product Owner',
                    'Development Team',
                    'Stakeholders'
                ],
                correct: 1,
                points: 2
            },
            {
                type: 'short',
                category: 'Scrum',
                question: 'Describe the main responsibilities of a Scrum Master.',
                points: 4
            },
            {
                type: 'short',
                category: 'Scrum',
                question: 'Explain the purpose and key activities of a Sprint Retrospective.',
                points: 4
            },

            // Stakeholder Analysis Questions
            {
                type: 'mcq',
                category: 'Stakeholder Analysis',
                question: 'In stakeholder analysis, stakeholders with high power and high interest should be:',
                options: [
                    'Monitored',
                    'Kept satisfied',
                    'Managed closely',
                    'Kept informed'
                ],
                correct: 2,
                points: 2
            },
            {
                type: 'dragdrop',
                category: 'Stakeholder Analysis',
                question: 'Match stakeholder categories with their management strategies:',
                leftItems: ['High Power, High Interest', 'High Power, Low Interest', 'Low Power, High Interest', 'Low Power, Low Interest'],
                rightItems: ['Manage Closely', 'Keep Satisfied', 'Keep Informed', 'Monitor'],
                correctMatches: {0: 0, 1: 1, 2: 2, 3: 3},
                points: 4
            },
            {
                type: 'short',
                category: 'Stakeholder Analysis',
                question: 'Describe three methods for identifying stakeholders in a software project.',
                points: 4
            },

            // Requirement Analysis Questions
            {
                type: 'mcq',
                category: 'Requirements',
                question: 'Which type of requirement describes what the system should do?',
                options: [
                    'Non-functional requirements',
                    'Functional requirements',
                    'Business requirements',
                    'Technical requirements'
                ],
                correct: 1,
                points: 2
            },
            {
                type: 'fill',
                category: 'Requirements',
                question: 'The process of checking that requirements are consistent, complete, and feasible is called requirements ______.',
                answer: ['validation'],
                points: 2
            },
            {
                type: 'short',
                category: 'Requirements',
                question: 'List and briefly explain three techniques for requirements elicitation.',
                points: 5
            },
            {
                type: 'short',
                category: 'Requirements',
                question: 'Explain the difference between functional and non-functional requirements with examples.',
                points: 4
            },

            // Additional Questions
            {
                type: 'mcq',
                category: 'UML General',
                question: 'Which UML diagram is best suited for modeling the workflow of a business process?',
                options: [
                    'Class Diagram',
                    'Sequence Diagram',
                    'Activity Diagram',
                    'Component Diagram'
                ],
                correct: 2,
                points: 2
            },
            {
                type: 'mcq',
                category: 'Project Management',
                question: 'In Agile methodology, what does the term "velocity" refer to?',
                options: [
                    'How fast developers type code',
                    'The amount of work completed in a sprint',
                    'The speed of deployment',
                    'The rate of bug fixes'
                ],
                correct: 1,
                points: 2
            },
            {
                type: 'short',
                category: 'Integration',
                question: 'Explain how UML diagrams can be integrated with Agile project management tools like JIRA for effective software development.',
                points: 5
            }
        ];

        // Quiz state
        let currentQuestion = 0;
        let studentAnswers = [];
        let quizStartTime;
        let timeRemaining = 50 * 60; // 50 minutes in seconds
        let timerInterval;
        let studentName = '';
        let studentId = '';

        function showWarning() {
            document.getElementById('warningOverlay').style.display = 'flex';
        }

        function closeWarning() {
            document.getElementById('warningOverlay').style.display = 'none';
        }

        function startQuiz() {
            studentName = document.getElementById('studentName').value.trim();
            studentId = document.getElementById('studentId').value.trim();
            
            if (!studentName || !studentId) {
                alert('Please enter both name and student ID');
                return;
            }

            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('questionContainer').style.display = 'block';
            
            quizStartTime = new Date();
            startTimer();
            loadQuestion();
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining--;
                updateTimerDisplay();
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    finishQuiz();
                }
            }, 1000);
        }

        function updateTimerDisplay() {
            const minutes = Math.floor(timeRemaining / 60);
            const seconds = timeRemaining % 60;
            document.getElementById('timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function loadQuestion() {
            const question = quizData[currentQuestion];
            const questionContent = document.getElementById('questionContent');
            
            // Update progress
            document.getElementById('questionNumber').textContent = `Question ${currentQuestion + 1} of ${quizData.length}`;
            document.getElementById('progressFill').style.width = `${((currentQuestion + 1) / quizData.length) * 100}%`;
            
            // Update navigation buttons
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').textContent = currentQuestion === quizData.length - 1 ? 'Finish' : 'Next';
            
            let html = `
                <div class="question-type">${question.category} - ${question.type.toUpperCase()}</div>
                <div class="question-text">${question.question}</div>
            `;
            
            switch (question.type) {
                case 'mcq':
                    html += '<div class="mcq-options">';
                    question.options.forEach((option, index) => {
                        const checked = studentAnswers[currentQuestion] === index ? 'checked' : '';
                        const selected = studentAnswers[currentQuestion] === index ? 'selected' : '';
                        html += `
                            <div class="mcq-option ${selected}" onclick="selectMCQ(${index})">
                                <input type="radio" name="mcq" value="${index}" ${checked}>
                                <span>${option}</span>
                            </div>
                        `;
                    });
                    html += '</div>';
                    break;
                    
                case 'fill':
                    let fillHtml = question.question;
                    question.answer.forEach((answer, index) => {
                        const savedAnswer = studentAnswers[currentQuestion] ? studentAnswers[currentQuestion][index] || '' : '';
                        fillHtml = fillHtml.replace('______', `<input type="text" class="fill-blank-input" value="${savedAnswer}" onchange="saveFillAnswer(${index}, this.value)" placeholder="Type answer here">`);
                    });
                    html += `<div class="fill-question">${fillHtml}</div>`;
                    break;
                    
                case 'dragdrop':
                    html += '<div class="drag-drop-container">';
                    html += '<div class="drag-column"><h4>Drag Items:</h4>';
                    question.leftItems.forEach((item, index) => {
                        html += `<div class="draggable-item" draggable="true" data-index="${index}" data-text="${item}">${item}</div>`;
                    });
                    html += '</div>';
                    html += '<div class="drag-column"><h4>Drop Zones:</h4>';
                    question.rightItems.forEach((item, index) => {
                        const matched = studentAnswers[currentQuestion] && Object.values(studentAnswers[currentQuestion]).indexOf(index) !== -1;
                        const matchedItem = matched ? Object.keys(studentAnswers[currentQuestion]).find(key => studentAnswers[currentQuestion][key] === index) : null;
                        const fillClass = matched ? 'filled' : '';
                        const content = matched ? question.leftItems[matchedItem] : '';
                        html += `
                            <div class="drop-zone ${fillClass}" data-target="${index}" ondrop="drop(event)" ondragover="allowDrop(event)">
                                <strong>${item}</strong>
                                <div class="dropped-item">${content}</div>
                            </div>
                        `;
                    });
                    html += '</div></div>';
                    break;
                    
                case 'short':
                    const shortAnswer = studentAnswers[currentQuestion] || '';
                    html += `<textarea class="short-answer" placeholder="Enter your answer here..." onchange="saveShortAnswer(this.value)">${shortAnswer}</textarea>`;
                    break;
            }
            
            questionContent.innerHTML = html;
            
            // Add drag and drop event listeners
            if (question.type === 'dragdrop') {
                initializeDragAndDrop();
            }
        }

        function selectMCQ(index) {
            studentAnswers[currentQuestion] = index;
            document.querySelectorAll('.mcq-option').forEach((option, i) => {
                option.classList.toggle('selected', i === index);
                option.querySelector('input').checked = i === index;
            });
        }

        function saveFillAnswer(index, value) {
            if (!studentAnswers[currentQuestion]) {
                studentAnswers[currentQuestion] = [];
            }
            studentAnswers[currentQuestion][index] = value.toLowerCase().trim();
        }

        function saveShortAnswer(value) {
            studentAnswers[currentQuestion] = value.trim();
        }

        function initializeDragAndDrop() {
            const draggableItems = document.querySelectorAll('.draggable-item');
            
            draggableItems.forEach(item => {
                item.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', e.target.dataset.index);
                    e.target.classList.add('dragging');
                });
                
                item.addEventListener('dragend', (e) => {
                    e.target.classList.remove('dragging');
                });
            });
        }

        function allowDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.add('drag-over');
        }

        function drop(event) {
            event.preventDefault();
            event.currentTarget.classList.remove('drag-over');
            
            const draggedIndex = parseInt(event.dataTransfer.getData('text/plain'));
            const targetIndex = parseInt(event.currentTarget.dataset.target);
            
            if (!studentAnswers[currentQuestion]) {
                studentAnswers[currentQuestion] = {};
            }
            
            // Clear previous mapping for this dragged item
            Object.keys(studentAnswers[currentQuestion]).forEach(key => {
                if (parseInt(key) === draggedIndex) {
                    delete studentAnswers[currentQuestion][key];
                }
            });
            
            // Clear previous mapping for this target
            Object.keys(studentAnswers[currentQuestion]).forEach(key => {
                if (studentAnswers[currentQuestion][key] === targetIndex) {
                    delete studentAnswers[currentQuestion][key];
                }
            });
            
            studentAnswers[currentQuestion][draggedIndex] = targetIndex;
            
            // Update visual feedback
            const question = quizData[currentQuestion];
            const droppedItem = event.currentTarget.querySelector('.dropped-item');
            droppedItem.textContent = question.leftItems[draggedIndex];
            event.currentTarget.classList.add('filled');
        }

        function nextQuestion() {
            if (currentQuestion < quizData.length - 1) {
                currentQuestion++;
                loadQuestion();
            } else {
                finishQuiz();
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                loadQuestion();
            }
        }

        function finishQuiz() {
            clearInterval(timerInterval);
            calculateResults();
            showResults();
        }

        function calculateResults() {
            let totalScore = 0;
            let maxScore = 0;
            const categoryScores = {};

            quizData.forEach((question, index) => {
                maxScore += question.points;
                
                if (!categoryScores[question.category]) {
                    categoryScores[question.category] = { score: 0, max: 0 };
                }
                categoryScores[question.category].max += question.points;

                const studentAnswer = studentAnswers[index];
                let questionScore = 0;

                switch (question.type) {
                    case 'mcq':
                        if (studentAnswer === question.correct) {
                            questionScore = question.points;
                        }
                        break;
                        
                    case 'fill':
                        if (studentAnswer && Array.isArray(studentAnswer)) {
                            let correctCount = 0;
                            question.answer.forEach((correct, i) => {
                                if (studentAnswer[i] && studentAnswer[i].toLowerCase().includes(correct.toLowerCase())) {
                                    correctCount++;
                                }
                            });
                            questionScore = (correctCount / question.answer.length) * question.points;
                        }
                        break;
                        
                    case 'dragdrop':
                        if (studentAnswer) {
                            let correctMatches = 0;
                            Object.keys(studentAnswer).forEach(key => {
                                if (question.correctMatches[parseInt(key)] === studentAnswer[key]) {
                                    correctMatches++;
                                }
                            });
                            questionScore = (correctMatches / Object.keys(question.correctMatches).length) * question.points;
                        }
                        break;
                        
                    case 'short':
                        // For short answers, give partial credit based on length and effort
                        if (studentAnswer && studentAnswer.length > 20) {
                            questionScore = question.points * 0.8; // Give 80% for substantial attempt
                        } else if (studentAnswer && studentAnswer.length > 10) {
                            questionScore = question.points * 0.6; // Give 60% for basic attempt
                        }
                        break;
                }

                totalScore += questionScore;
                categoryScores[question.category].score += questionScore;
            });

            // Store results
            window.quizResults = {
                studentName,
                studentId,
                totalScore: Math.round(totalScore * 10) / 10,
                maxScore,
                percentage: Math.round((totalScore / maxScore) * 100),
                categoryScores,
                timeTaken: Math.floor((Date.now() - quizStartTime) / 1000),
                answers: studentAnswers.map((answer, index) => ({
                    question: quizData[index].question,
                    studentAnswer: answer,
                    correctAnswer: getCorrectAnswer(index),
                    points: quizData[index].points,
                    category: quizData[index].category,
                    type: quizData[index].type
                }))
            };
        }

        function getCorrectAnswer(index) {
            const question = quizData[index];
            switch (question.type) {
                case 'mcq':
                    return question.options[question.correct];
                case 'fill':
                    return question.answer.join(', ');
                case 'dragdrop':
                    return 'See correct matches in detailed report';
                case 'short':
                    return 'Subjective answer - see detailed feedback';
                default:
                    return 'N/A';
            }
        }

        function showResults() {
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('resultsScreen').style.display = 'block';
            
            const results = window.quizResults;
            document.getElementById('finalScore').textContent = `${results.totalScore}/${results.maxScore}`;
            document.getElementById('scorePercentage').textContent = `${results.percentage}%`;
            
            // Category breakdown
            const breakdownHtml = Object.entries(results.categoryScores)
                .map(([category, scores]) => 
                    `<div class="breakdown-item">
                        <span>${category}</span>
                        <span>${Math.round(scores.score * 10) / 10}/${scores.max}</span>
                    </div>`
                ).join('');
            
            document.getElementById('scoreBreakdown').innerHTML = `
                <h3>Score Breakdown by Category:</h3>
                ${breakdownHtml}
                <div class="breakdown-item" style="border-top: 2px solid #667eea; font-weight: bold;">
                    <span>Total Time Taken</span>
                    <span>${Math.floor(results.timeTaken / 60)}:${(results.timeTaken % 60).toString().padStart(2, '0')}</span>
                </div>
            `;
        }

        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const results = window.quizResults;
            
            // Header
            doc.setFontSize(20);
            doc.text('Quiz Report: Project Management & UML', 20, 30);
            
            doc.setFontSize(12);
            doc.text(`Student: ${results.studentName}`, 20, 50);
            doc.text(`Student ID: ${results.studentId}`, 20, 60);
            doc.text(`Date: ${new Date().toLocaleDateString()}`, 20, 70);
            doc.text(`Final Score: ${results.totalScore}/${results.maxScore} (${results.percentage}%)`, 20, 80);
            doc.text(`Time Taken: ${Math.floor(results.timeTaken / 60)}:${(results.timeTaken % 60).toString().padStart(2, '0')}`, 20, 90);
            
            // Grade assessment
            let grade = 'F';
            if (results.percentage >= 90) grade = 'A+';
            else if (results.percentage >= 85) grade = 'A';
            else if (results.percentage >= 80) grade = 'A-';
            else if (results.percentage >= 75) grade = 'B+';
            else if (results.percentage >= 70) grade = 'B';
            else if (results.percentage >= 65) grade = 'B-';
            else if (results.percentage >= 60) grade = 'C+';
            else if (results.percentage >= 55) grade = 'C';
            else if (results.percentage >= 50) grade = 'C-';
            else if (results.percentage >= 45) grade = 'D';
            
            doc.text(`Grade: ${grade}`, 20, 100);
            
            // Category scores
            let yPos = 120;
            doc.setFontSize(14);
            doc.text('Category Breakdown:', 20, yPos);
            yPos += 10;
            
            doc.setFontSize(10);
            Object.entries(results.categoryScores).forEach(([category, scores]) => {
                const categoryPercentage = Math.round((scores.score / scores.max) * 100);
                doc.text(`${category}: ${Math.round(scores.score * 10) / 10}/${scores.max} (${categoryPercentage}%)`, 25, yPos);
                yPos += 8;
            });
            
            // Detailed answers
            yPos += 10;
            doc.setFontSize(12);
            doc.text('Detailed Results:', 20, yPos);
            yPos += 10;
            
            doc.setFontSize(8);
            results.answers.forEach((answer, index) => {
                if (yPos > 270) {
                    doc.addPage();
                    yPos = 20;
                }
                
                const questionText = answer.question.length > 70 ? answer.question.substring(0, 70) + '...' : answer.question;
                doc.text(`Q${index + 1} (${answer.type.toUpperCase()}): ${questionText}`, 20, yPos);
                yPos += 6;
                
                let studentAnswerText = '';
                if (Array.isArray(answer.studentAnswer)) {
                    studentAnswerText = answer.studentAnswer.join(', ');
                } else if (typeof answer.studentAnswer === 'object') {
                    studentAnswerText = 'Drag & Drop Answer (see visual)';
                } else {
                    studentAnswerText = String(answer.studentAnswer || 'No answer');
                }
                
                if (studentAnswerText.length > 60) {
                    studentAnswerText = studentAnswerText.substring(0, 60) + '...';
                }
                
                doc.text(`Your Answer: ${studentAnswerText}`, 25, yPos);
                yPos += 6;
                
                const correctText = answer.correctAnswer.length > 60 ? answer.correctAnswer.substring(0, 60) + '...' : answer.correctAnswer;
                doc.text(`Correct: ${correctText}`, 25, yPos);
                yPos += 10;
            });
            
            // Footer
            if (yPos > 250) {
                doc.addPage();
                yPos = 20;
            }
            yPos += 20;
            doc.setFontSize(10);
            doc.text('This report contains your complete quiz responses and scoring breakdown.', 20, yPos);
            doc.text('For questions about grading, please contact your instructor.', 20, yPos + 10);
            
            doc.save(`Quiz_Report_${results.studentName.replace(/\s+/g, '_')}_${results.studentId}.pdf`);
        }

        function restartQuiz() {
            if (confirm('Are you sure you want to restart the quiz? All progress will be lost.')) {
                currentQuestion = 0;
                studentAnswers = [];
                timeRemaining = 50 * 60;
                document.getElementById('resultsScreen').style.display = 'none';
                document.getElementById('welcomeScreen').style.display = 'block';
                document.getElementById('studentName').value = '';
                document.getElementById('studentId').value = '';
            }
        }

        // Initialize the quiz
        document.addEventListener('DOMContentLoaded', function() {
            // Additional security measures
            console.clear();
            console.log('%cSTOP!', 'color: red; font-size: 50px; font-weight: bold;');
            console.log('%cThis is a quiz environment. Attempting to cheat is prohibited.', 'color: red; font-size: 16px;');
            
            // Disable drag events on non-interactive elements
            document.addEventListener('dragstart', function(e) {
                if (!e.target.classList.contains('draggable-item')) {
                    e.preventDefault();
                }
            });
        });
    </script>
</body>
</html>